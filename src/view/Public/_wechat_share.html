<script src="__PUBLIC__/wechat/js/weixin.js"></script>
<script type="text/javascript">
    wx.config({
        debug: false,
        appId: '{$jssdk.appId}',
        timestamp: '{$jssdk.timestamp}',
        nonceStr: '{$jssdk.nonceStr}',
        signature: '{$jssdk.signature}',
        jsApiList: [
            'checkJsApi',
            'onMenuShareTimeline',
            'onMenuShareAppMessage',
            'onMenuShareQQ',
            'onMenuShareWeibo',
            'onMenuShareQZone',
            'hideMenuItems'
        ]
    });


    wx.ready(function () {
        // 在这里调用 API
        wx.checkJsApi({
            jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo','onMenuShareQZone', 'hideMenuItems'], // 需要检测的JS接口列表，所有JS接口列表见附录2,
            success: function(res) {
                // 以键值对的形式返回，可用的api值true，不可用为false
                // 如：{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}
                if(!res.checkResult.onMenuShareTimeline) alert("当前微信版本，分享到朋友圈 不可用！");
                if(!res.checkResult.onMenuShareAppMessage) alert("当前微信版本，分享给朋友 不可用！");
                if(!res.checkResult.onMenuShareQQ) alert("当前微信版本，分享到QQ 不可用！");
                if(!res.checkResult.onMenuShareWeibo) alert("当前微信版本，分享到微博 不可用！");
                if(!res.checkResult.onMenuShareQZone) alert("当前微信版本，分享到QQ空间 不可用！");
            },
            fail:function(){
                //接口调用失败
            }
        });

        var share_title = "{$jssdk_info.share_title}";
        var share_link = "{$jssdk_info.share_link}";
        var share_imgUrl = "{$jssdk_info.share_imgUrl}";
        var share_desc = "{$jssdk_info.share_desc}";
        wx.onMenuShareTimeline({
            title: share_title,
            link: share_link,
            imgUrl: share_imgUrl,
            success: function () {
                // 用户确认分享后执行的回调函数
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
        wx.onMenuShareAppMessage({
            title: share_title,
            desc: share_desc,
            link: share_link,
            imgUrl: share_imgUrl,
            type: '', // 分享类型,music、video或link，不填默认为link
            dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
            success: function () {
                // 用户确认分享后执行的回调函数
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
        wx.onMenuShareQQ({
            title: share_title,
            desc: share_desc,
            link: share_link,
            imgUrl: share_imgUrl,
            success: function () {
                // 用户确认分享后执行的回调函数
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
        wx.onMenuShareWeibo({
            title: share_title,
            desc: share_desc,
            link: share_link,
            imgUrl: share_imgUrl,
            success: function () {
                // 用户确认分享后执行的回调函数
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });

        wx.onMenuShareQZone({
            title: share_title,
            desc: share_desc,
            link: share_link,
            imgUrl: share_imgUrl,
            success: function () {
                // 用户确认分享后执行的回调函数
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });

        wx.hideMenuItems({
            menuList: ['menuItem:copyUrl'] // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3
        });
    });
    wx.error(function(res){
        //alert("页面载入错误");
    });
</script>